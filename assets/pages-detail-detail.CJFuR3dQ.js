import{L as e,G as l,r as a,o,k as t,a as s,w as u,F as n,f as c,d as r,t as i,H as d,J as f,n as v,Q as m,T as _,D as k,g,x as h}from"./index-DWDROSWy.js";import{_ as p}from"./uni-link.BdjuQuia.js";import{_ as x,f as b,i as y,o as j,j as L,k as S,b as U,r as F}from"./words.DPTuNnC9.js";import{a as N}from"./default.D3OAVgIr.js";const w=x({__name:"detail",setup(x){const w=e({}),C=e(""),z=e(""),B=e(y()[0]),O=e(!0),T=e(!0),I=e({});b((()=>{console.log("用户返回上一页或使用侧滑手势"),B.value.color===y()[2].color&&(N.link=w.value.key)})),j((e=>{console.log("onLoad"),I.value=L(),w.value=JSON.parse(decodeURIComponent(e.obj)),w.value.shareUserName="热心网友",C.value=S(w),z.value=C.value,"1"==w.value.root||"2"==w.value.root?(P(),O.value=!0):O.value=!1,"4"==w.value.root?T.value=!1:T.value=!0}));const J=()=>{m({title:"信息反馈",content:"未找到预期资源，将调整链接权重。感谢您的理解与支持！",success:e=>{e.confirm?(console.log("用户点击确定"),M()):e.cancel&&console.log("用户点击取消")}})},M=()=>{console.log(w.value);let e=w.value,a={index:e.id,key:e.key,title:e.title,time:e.time,root:e.root,ak:e.shareUserName};console.log(a),l({url:`${U}/feed/insert`,method:"POST",data:a,success:e=>{let l=e.data;console.log(l)},fail:e=>{console.log(e)}})},P=()=>{const e={...w.value};delete e.title,delete e.time,delete e.cat,l({url:`${U}/v3/ali/checkLink2`,method:"POST",data:{obj:e},success:l=>{let a=l.data;console.log(a),200==a.code&&(B.value=y()[1],w.value.shareUserName=a.author,w.value.title=a.file_name,"1"==e.root&&(z.value=C.value+"/"+a.file_id),"2"==e.root&&(z.value=C.value)),400==a.code&&(console.log("资源无效"),B.value=y()[2],"ShareLink.Forbidden"==a.msg?B.value.str="文件违规，已禁止访问":"ShareLink.Cancelled"==a.msg?B.value.str="来晚啦，该分享已失效":console.log(a.msg))},fail:e=>{console.log(e)}})},$=()=>{let e="资源名称 : "+w.value.title+"\n资源链接 : "+C.value+"\n";2==Math.floor(3*Math.random())+1&&(e+="影搜(https://yingso.fun)：您的云盘资源小助手，全心全意为您服务，祝您生活愉快。\n"),"4"==w.value.root&&(e=C.value),_({data:e,success:function(){k({title:"复制成功",icon:"success",duration:2e3})},fail:function(e){console.log(e),k({title:"复制失败",icon:"none",duration:2e3})}})};return(e,l)=>{const m=F(a("uni-link"),p),_=c,k=g,x=h;return o(),t(n,null,[s(_,{class:"introduce"},{default:u((()=>[s(m,{style:{margin:"40px 0"},href:I.value.l,color:"#2196F3",fontSize:"20",text:I.value.t},null,8,["href","text"])])),_:1}),s(_,{class:"content"},{default:u((()=>[s(_,{class:"header"},{default:u((()=>[s(_,{class:"fistLine"},{default:u((()=>[s(_,{class:"think"},{default:u((()=>[s(k,null,{default:u((()=>[r("感谢:")])),_:1}),s(k,{style:{color:"#1BFA28"}},{default:u((()=>[r(i(w.value.shareUserName),1)])),_:1}),s(k,null,{default:u((()=>[r("的分享")])),_:1})])),_:1}),s(k,{class:"feedback",onClick:J},{default:u((()=>[r("反馈")])),_:1})])),_:1}),s(_,{class:"linkView"},{default:u((()=>[s(k,null,{default:u((()=>[r(i(w.value.title+":"),1)])),_:1}),s(k,{style:{"font-size":"0.9em",margin:"10rpx"}},{default:u((()=>[r(i(C.value),1)])),_:1})])),_:1}),d(s(_,{class:"check"},{default:u((()=>[s(k,null,{default:u((()=>[r("链接有效性检测：")])),_:1}),s(x,{src:B.value.pic,mode:"aspectFit"},null,8,["src"]),s(k,{style:v({color:B.value.color})},{default:u((()=>[r(i(B.value.str),1)])),_:1},8,["style"])])),_:1},512),[[f,O.value]])])),_:1}),s(_,{class:"bottom"},{default:u((()=>[s(k,{class:"combtn \x3c!-- leftBtn --\x3e",style:{"background-color":"#c6e2ff"},onClick:$},{default:u((()=>[r(" 复制链接")])),_:1}),d(s(m,{class:"combtn linkBtn",href:z.value,showUnderLine:"false",color:"black",fontSize:"18",text:"直接打开"},null,8,["href"]),[[f,T.value]])])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-9a42c6f7"]]);export{w as default};
