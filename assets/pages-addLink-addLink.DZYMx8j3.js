import{r as e,o as t,c as s,w as o,a,m as l,n as i,e as n,k as r,F as c,b as u,P as d,I as h,f as p,L as f,j as y,H as m,J as g,d as b,l as v,s as w,G as x,Q as C,M as S,x as k,R as _,t as I,N as $,O as B}from"./index-DWDROSWy.js";import{_ as F}from"./uni-icons.DFiIWSQ6.js";import{_ as V,r as M,o as z,g as T,h as E,b as A}from"./words.DPTuNnC9.js";import{_ as P}from"./uni-link.BdjuQuia.js";function j(e){let t="";for(let s in e){t+=`${s}:${e[s]};`}return t}const N=V({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let s in e)e[s]&&(t+=`${s} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return j({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return j({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("focus",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(f,y,m,g,b,v){const w=M(e("uni-icons"),F),x=d,C=h,S=p;return t(),s(S,{class:l(["uni-easyinput",{"uni-easyinput-error":v.msg}]),style:i(v.boxStyle)},{default:o((()=>[a(S,{class:l(["uni-easyinput__content",v.inputContentClass]),style:i(v.inputContentStyle)},{default:o((()=>[m.prefixIcon?(t(),s(w,{key:0,class:"content-clear-icon",type:m.prefixIcon,color:"#c0c4cc",onClick:y[0]||(y[0]=e=>v.onClickIcon("prefix")),size:"22"},null,8,["type"])):n("",!0),"textarea"===m.type?(t(),s(x,{key:1,class:l(["uni-easyinput__content-textarea",{"input-padding":m.inputBorder}]),name:m.name,value:b.val,placeholder:m.placeholder,placeholderStyle:m.placeholderStyle,disabled:m.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:v.inputMaxlength,focus:b.focused,autoHeight:m.autoHeight,"cursor-spacing":m.cursorSpacing,onInput:v.onInput,onBlur:v._Blur,onFocus:v._Focus,onConfirm:v.onConfirm,onKeyboardheightchange:v.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(t(),s(C,{key:2,type:"password"===m.type?"text":m.type,class:"uni-easyinput__content-input",style:i(v.inputStyle),name:m.name,value:b.val,password:!b.showPassword&&"password"===m.type,placeholder:m.placeholder,placeholderStyle:m.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:m.disabled,maxlength:v.inputMaxlength,focus:b.focused,confirmType:m.confirmType,"cursor-spacing":m.cursorSpacing,onFocus:v._Focus,onBlur:v._Blur,onInput:v.onInput,onConfirm:v.onConfirm,onKeyboardheightchange:v.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===m.type&&m.passwordIcon?(t(),r(c,{key:3},[v.isVal?(t(),s(w,{key:0,class:l(["content-clear-icon",{"is-textarea-icon":"textarea"===m.type}]),type:b.showPassword?"eye-slash-filled":"eye-filled",size:22,color:b.focusShow?m.primaryColor:"#c0c4cc",onClick:v.onEyes},null,8,["class","type","color","onClick"])):n("",!0)],64)):m.suffixIcon?(t(),r(c,{key:4},[m.suffixIcon?(t(),s(w,{key:0,class:"content-clear-icon",type:m.suffixIcon,color:"#c0c4cc",onClick:y[1]||(y[1]=e=>v.onClickIcon("suffix")),size:"22"},null,8,["type"])):n("",!0)],64)):(t(),r(c,{key:5},[m.clearable&&v.isVal&&!m.disabled&&"textarea"!==m.type?(t(),s(w,{key:0,class:l(["content-clear-icon",{"is-textarea-icon":"textarea"===m.type}]),type:"clear",size:m.clearSize,color:v.msg?"#dd524d":b.focusShow?m.primaryColor:"#c0c4cc",onClick:v.onClear},null,8,["class","size","color","onClick"])):n("",!0)],64)),u(f.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-92c58260"]]);const U=new Uint8Array([98,129,249,44,200,112,209,217,45,23,24,165,147,162,88,160]);async function H(e){const t=await async function(e,t){const s=await window.crypto.subtle.importKey("raw",t,{name:"AES-CBC",length:128},!1,["encrypt","decrypt"]),o=window.crypto.getRandomValues(new Uint8Array(16)),a=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:o},s,(new TextEncoder).encode(e)),l=new Uint8Array(a),i=new Uint8Array(o.length+l.length);return i.set(o),i.set(l,o.length),i}(e,U),s=(o=t,btoa(String.fromCharCode.apply(null,o)));var o;return console.log("加密结果:",s),s}const L=V({__name:"addLink",setup(l){const i=f(!0),u=f(""),d=f("qt"),h=f("     影搜本着资源共建共享的原则，支持阿里、夸克、迅雷、百度、UC五大网盘，欢迎大家踊跃投稿分享。"),F=f([]),V=f(9),j=f(""),U=f(!1);z((async()=>{console.log("onLoad");var e=T().slice();e.splice(0,1),F.value=e,console.log(F.value),j.value=y("a_key"),j.value.startsWith("ys_")&&(U.value=!0),d.value=await H("ys_qt")}));const L=async e=>{const t=e.detail.value;console.log(t);const s=`ys_${t}`;d.value=await H(s)},K=()=>{let e=u.value;if(e.startsWith("ys_"))return w("a_key",e),u.value="",void(U.value=!0);e=E(e);let t=U.value?{v:e,t:d.value,a:j.value}:{v:e,t:d.value};e.length>0&&(console.log("提交"),x({url:`${A}/v3/ali/insertMany`,method:"POST",data:t,success:t=>{console.log(t),400!==t.data.code&&(e=""),u.value="",C({title:"提示",content:t.data.msg,showCancel:!1})},fail:e=>{console.log(e),C({title:"提示",content:"投稿失败",showCancel:!1})}}))};return(l,d)=>{const f=p,y=$,w=B,x=S,C=M(e("uni-easyinput"),N),z=M(e("uni-link"),P),T=k,E=_;return t(),s(f,{class:"content"},{default:o((()=>[m(a(f,{class:"content"},{default:o((()=>[a(f,{class:"radioContent"},{default:o((()=>[a(f,{class:"title"},{default:o((()=>[b("资源类型：")])),_:1}),a(x,{class:"radioGroup",name:"radio",onChange:L},{default:o((()=>[(t(!0),r(c,null,v(F.value,((e,l)=>(t(),s(w,{key:l,class:"radio-label"},{default:o((()=>[a(w,{class:"radioLabel"},{default:o((()=>[a(y,{value:e.type,checked:l===V.value},null,8,["value","checked"]),b(I(e.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),a(f,{class:"ziyuan"},{default:o((()=>[a(f,{class:"title",style:{"margin-bottom":"6px"}},{default:o((()=>[b("投稿资源：")])),_:1}),a(C,{class:"easyinput",type:"textarea",maxlength:"-1",modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=e=>u.value=e),placeholder:h.value,"placeholder-style":"font-size : 16px"},null,8,["modelValue","placeholder"])])),_:1}),a(f,{class:"geshi"},{default:o((()=>[a(z,{href:"https://docs.qq.com/doc/p/6c1c3ee9e700a5d613db9ed5c71f02b15294ed24",text:"投稿必看V1.0",showUnderLine:"false",color:"#007BFF","font-size":"14"}),U.value?(t(),s(f,{key:0},{default:o((()=>[a(T,{style:{width:"20px",height:"24px","margin-right":"15rpx"},src:"https://yingso.fun:3000/ys_check/a.png",mode:"aspectFit"})])),_:1})):n("",!0)])),_:1}),a(E,{type:"default",style:{color:"black",width:"100%",height:"40px",backgroundColor:"#56A4F9",borderColor:"#56A4F9"},size:"default",onClick:K},{default:o((()=>[b("提交")])),_:1})])),_:1},512),[[g,i.value]])])),_:1})}}},[["__scopeId","data-v-c595a6ba"]]);export{L as default};
